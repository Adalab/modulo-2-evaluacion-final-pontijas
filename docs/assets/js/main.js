"use strict";const serieInput=document.querySelector(".js-search-input"),searchBtn=document.querySelector(".js-search-btn"),seriesDisplay=document.querySelector(".js-search-display"),favList=document.querySelector(".js-fav-list");let series=[],favSeries=[];function getData(e){e.preventDefault(),fetch(` http://api.tvmaze.com/search/shows?q=${serieInput.value}`).then(e=>e.json()).then(e=>{series=e,paintCards()})}function setHtmlCode(e){let t="";return t+=`<article class="js-add-fav css-card" data-id="${e.show.id}">`,t+=`<h3>${e.show.name}</h3>`,null===e.show.image?t+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="póster de la película">':t+=`<img src="${e.show.image.medium}" alt="póster de la película">`,t+="</article>",t}const paintCards=()=>{let e="";for(const t of series)e+=setHtmlCode(t);seriesDisplay.innerHTML=e,listenAddFavBtn()};function listenAddFavBtn(){const e=document.querySelectorAll(".js-add-fav");for(const t of e)t.addEventListener("click",addFavSerie)}function addFavSerie(e){const t=parseInt(e.currentTarget.dataset.id);let s;for(const e of series)e.show.id===t&&(s=e.show);favSeries.push(s),paintFavSeriesList(),setInLocalStorage()}function getFavListCode(e){let t="";return null===e.image?(t+='<li class="css-fav-li">',t+=`<h3>${e.name}</h3>`,t+='<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="póster de la serie" class="css-fav-img">',t+='<button class="css-clear-btn">Quitar</button>',t+="</li>"):(t+='<li class="css-fav-li">',t+=`<h3>${e.name}</h3>`,t+=`<img src="${e.image.medium}" alt="póster de la serie" class="css-fav-img">`,t+='<button class="css-clear-btn">Quitar</button>',t+="</li>"),t}function paintFavSeriesList(){favList.innerHTML="";for(const e of favSeries)favList.innerHTML+=getFavListCode(e)}function setInLocalStorage(){const e=JSON.stringify(favSeries);localStorage.setItem("favSeries",e)}function getFromLocalStorage(){const e=localStorage.getItem("favSeries");console.log("Esto es storedData",e),null!==e&&(favSeries=JSON.parse(e),paintFavSeriesList())}searchBtn.addEventListener("click",getData),getFromLocalStorage();